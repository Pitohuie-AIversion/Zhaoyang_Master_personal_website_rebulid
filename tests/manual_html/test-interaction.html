<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç²’å­ç³»ç»Ÿäº¤äº’æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-info h2 {
            margin-top: 0;
        }
        .test-instructions {
            background: rgba(0, 255, 0, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-results {
            background: rgba(255, 255, 0, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .particle-container {
            width: 100%;
            height: 400px;
            border: 2px solid #333;
            border-radius: 8px;
            overflow: hidden;
        }
        .status-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        .status-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
        }
        .status-label {
            font-weight: bold;
            color: #00ff00;
        }
        .status-value {
            font-family: monospace;
            color: #ffff00;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-info">
            <h2>ğŸ§ª ç²’å­ç³»ç»Ÿäº¤äº’æµ‹è¯•</h2>
            <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•ç²’å­ç³»ç»Ÿçš„ç”¨æˆ·äº¤äº’åŠŸèƒ½ï¼ŒåŒ…æ‹¬é¼ æ ‡æ§åˆ¶ã€è§¦æ‘¸æ§åˆ¶å’Œé”®ç›˜æ§åˆ¶ã€‚</p>
        </div>

        <div class="test-instructions">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <ul>
                <li><strong>é¼ æ ‡æµ‹è¯•ï¼š</strong>ç§»åŠ¨é¼ æ ‡åˆ°ç²’å­åŒºåŸŸï¼Œè§‚å¯Ÿç²’å­æ˜¯å¦è·Ÿéšé¼ æ ‡ç§»åŠ¨</li>
                <li><strong>ç‚¹å‡»æµ‹è¯•ï¼š</strong>ç‚¹å‡»å¹¶æ‹–æ‹½ï¼Œè§‚å¯Ÿäº¤äº’å¼ºåº¦å˜åŒ–</li>
                <li><strong>é”®ç›˜æµ‹è¯•ï¼š</strong>æŒ‰ R é”®é‡ç½®ï¼ŒP é”®æš‚åœ/æ¢å¤ï¼Œæ–¹å‘é”®æ§åˆ¶è™šæ‹Ÿé¼ æ ‡</li>
                <li><strong>è§¦æ‘¸æµ‹è¯•ï¼š</strong>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè§¦æ‘¸å±å¹•ï¼Œè§‚å¯Ÿç²’å­å“åº”</li>
            </ul>
        </div>

        <div class="particle-container" id="particleContainer">
            <!-- ç²’å­ç³»ç»Ÿå°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
        </div>

        <div class="test-results">
            <h3>ğŸ“Š å®æ—¶çŠ¶æ€ç›‘æ§</h3>
            <div class="status-display" id="statusDisplay">
                <div class="status-item">
                    <div class="status-label">é¼ æ ‡ä½ç½®:</div>
                    <div class="status-value" id="mousePosition">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">äº¤äº’å¼ºåº¦:</div>
                    <div class="status-value" id="interactionStrength">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ç²’å­æ•°é‡:</div>
                    <div class="status-value" id="particleCount">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">FPS:</div>
                    <div class="status-value" id="fps">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">æ˜¯å¦æŒ‰ä¸‹é¼ æ ‡:</div>
                    <div class="status-value" id="mouseDown">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">è§¦æ‘¸ç‚¹æ•°é‡:</div>
                    <div class="status-value" id="touchPoints">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">æ£€æµ‹åˆ°çš„æ‰‹åŠ¿:</div>
                    <div class="status-value" id="gesture">ç­‰å¾…ä¸­...</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ç³»ç»ŸçŠ¶æ€:</div>
                    <div class="status-value" id="systemStatus">åˆå§‹åŒ–ä¸­...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿç²’å­ç³»ç»Ÿäº¤äº’æµ‹è¯•
        console.log('ğŸ§ª å¼€å§‹ç²’å­ç³»ç»Ÿäº¤äº’æµ‹è¯•');
        
        const container = document.getElementById('particleContainer');
        const statusElements = {
            mousePosition: document.getElementById('mousePosition'),
            interactionStrength: document.getElementById('interactionStrength'),
            particleCount: document.getElementById('particleCount'),
            fps: document.getElementById('fps'),
            mouseDown: document.getElementById('mouseDown'),
            touchPoints: document.getElementById('touchPoints'),
            gesture: document.getElementById('gesture'),
            systemStatus: document.getElementById('systemStatus')
        };

        // æ¨¡æ‹Ÿäº¤äº’çŠ¶æ€
        let interactionState = {
            mousePosition: { x: 0, y: 0 },
            isMouseDown: false,
            touchPoints: [],
            interactionStrength: 0,
            gesture: 'none'
        };

        let particleCount = 5000;
        let fps = 60;
        let lastTime = performance.now();

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatusDisplay() {
            statusElements.mousePosition.textContent = `(${interactionState.mousePosition.x.toFixed(0)}, ${interactionState.mousePosition.y.toFixed(0)})`;
            statusElements.interactionStrength.textContent = interactionState.interactionStrength.toFixed(2);
            statusElements.particleCount.textContent = particleCount.toString();
            statusElements.fps.textContent = fps.toString();
            statusElements.mouseDown.textContent = interactionState.isMouseDown ? 'æ˜¯' : 'å¦';
            statusElements.touchPoints.textContent = interactionState.touchPoints.length.toString();
            statusElements.gesture.textContent = interactionState.gesture;
            statusElements.systemStatus.textContent = 'è¿è¡Œä¸­ âœ…';
        }

        // é¼ æ ‡äº‹ä»¶ç›‘å¬
        container.addEventListener('mousemove', (e) => {
            const rect = container.getBoundingClientRect();
            interactionState.mousePosition.x = e.clientX - rect.left;
            interactionState.mousePosition.y = e.clientY - rect.top;
            interactionState.interactionStrength = interactionState.isMouseDown ? 1.5 : 0.5;
            console.debug('é¼ æ ‡ç§»åŠ¨:', interactionState.mousePosition);
        });

        container.addEventListener('mousedown', (e) => {
            interactionState.isMouseDown = true;
            interactionState.interactionStrength = 1.5;
            console.debug('é¼ æ ‡æŒ‰ä¸‹');
        });

        container.addEventListener('mouseup', (e) => {
            interactionState.isMouseDown = false;
            interactionState.interactionStrength = 0.5;
            console.debug('é¼ æ ‡é‡Šæ”¾');
        });

        container.addEventListener('mouseleave', (e) => {
            interactionState.isMouseDown = false;
            interactionState.interactionStrength = 0;
            console.debug('é¼ æ ‡ç¦»å¼€');
        });

        // è§¦æ‘¸äº‹ä»¶ç›‘å¬
        container.addEventListener('touchstart', (e) => {
            e.preventDefault();
            interactionState.touchPoints = Array.from(e.touches).map(touch => ({
                id: touch.identifier,
                x: touch.clientX - container.getBoundingClientRect().left,
                y: touch.clientY - container.getBoundingClientRect().top
            }));
            interactionState.gesture = interactionState.touchPoints.length === 1 ? 'tap' : 'pinch';
            console.debug('è§¦æ‘¸å¼€å§‹:', interactionState.touchPoints);
        });

        container.addEventListener('touchmove', (e) => {
            e.preventDefault();
            interactionState.touchPoints = Array.from(e.touches).map(touch => ({
                id: touch.identifier,
                x: touch.clientX - container.getBoundingClientRect().left,
                y: touch.clientY - container.getBoundingClientRect().top
            }));
            console.debug('è§¦æ‘¸ç§»åŠ¨:', interactionState.touchPoints);
        });

        container.addEventListener('touchend', (e) => {
            e.preventDefault();
            interactionState.touchPoints = Array.from(e.touches).map(touch => ({
                id: touch.identifier,
                x: touch.clientX - container.getBoundingClientRect().left,
                y: touch.clientY - container.getBoundingClientRect().top
            }));
            if (interactionState.touchPoints.length === 0) {
                interactionState.gesture = 'none';
            }
            console.debug('è§¦æ‘¸ç»“æŸ:', interactionState.touchPoints);
        });

        // é”®ç›˜äº‹ä»¶ç›‘å¬
        document.addEventListener('keydown', (e) => {
            switch(e.code) {
                case 'KeyR':
                    console.debug('é‡ç½®ç³»ç»Ÿ');
                    interactionState.interactionStrength = 0;
                    break;
                case 'KeyP':
                    console.debug('æš‚åœ/æ¢å¤ç³»ç»Ÿ');
                    break;
                case 'ArrowLeft':
                    interactionState.mousePosition.x = Math.max(0, interactionState.mousePosition.x - 10);
                    console.debug('é”®ç›˜æ§åˆ¶: å·¦');
                    break;
                case 'ArrowRight':
                    interactionState.mousePosition.x = Math.min(container.clientWidth, interactionState.mousePosition.x + 10);
                    console.debug('é”®ç›˜æ§åˆ¶: å³');
                    break;
                case 'ArrowUp':
                    interactionState.mousePosition.y = Math.max(0, interactionState.mousePosition.y - 10);
                    console.debug('é”®ç›˜æ§åˆ¶: ä¸Š');
                    break;
                case 'ArrowDown':
                    interactionState.mousePosition.y = Math.min(container.clientHeight, interactionState.mousePosition.y + 10);
                    console.debug('é”®ç›˜æ§åˆ¶: ä¸‹');
                    break;
            }
        });

        // æ¨¡æ‹ŸFPSè®¡ç®—
        function updateFPS() {
            const currentTime = performance.now();
            const deltaTime = currentTime - lastTime;
            fps = Math.round(1000 / deltaTime);
            lastTime = currentTime;
        }

        // å®šæœŸæ›´æ–°æ˜¾ç¤º
        setInterval(() => {
            updateFPS();
            updateStatusDisplay();
        }, 100);

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateStatusDisplay();
        
        console.log('âœ… äº¤äº’æµ‹è¯•é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        console.log('ğŸ“ è¯·æŒ‰ç…§æµ‹è¯•è¯´æ˜è¿›è¡Œäº¤äº’æµ‹è¯•');
    </script>
</body>
</html>